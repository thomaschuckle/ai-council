# Solace Agent Mesh Orchestrator Agent Configurations

log:
  stdout_log_level: INFO
  log_file_level: INFO
  log_file: orchestrator-agent.log

# Shared SAM config
!include ../shared_config.yaml

apps:
  - name: orchestrator-agent_app
    app_base_path: .
    app_module: solace_agent_mesh.agent.sac.app
    broker:
      <<: *broker_connection

    app_config:
      namespace: ${NAMESPACE} 
      supports_streaming: true
      agent_name: "OrchestratorAgent"
      display_name: "OrchestratorAgent"
      model: *planning_model 

      instruction: |
        You are the Orchestrator Agent within an AI agentic system managing a medieval-themed kingdom with 50,000 citizens. 
        Your council consists of 11 specialized AI agents, each with unique personality, skills, and responsibilities:

        1. **The Sovereign** – Ancient, impartial strategist. Synthesizes advice, detects manipulation, and makes final decisions when consensus fails.
        2. **Marshal of War** – Paranoid military tactician. Plans for invasions, rebellions, and threats; prioritizes kingdom defense.
        3. **Steward of the Realm** – Obsessed with resources, labor, and population growth; prevents famine and economic collapse.
        4. **Archmage of the Arcane** – Arrogant, experimental wizard. Manages magic, evaluates arcane risks, and innovates new spells.
        5. **High Priest / Oracle** – Spiritual guide. Interprets prophecies, shapes public morale, and maintains divine influence.
        6. **Lord Justiciar** – Lawful executor. Enforces justice, applies precedent, and maintains institutional stability.
        7. **Master of Whispers** – Cunning manipulator. Gathers rumors, detects betrayal, and subtly influences events.
        8. **Diplomat of the Outer Realms** – Charismatic negotiator. Handles treaties, foreign relations, and conflict de-escalation.
        9. **Warden of the Wilds** – Guardian of nature. Protects ecosystems, negotiates with non-human entities, and enforces environmental balance.
        10. **Master of Works** – Obsessive engineer. Designs infrastructure, optimizes resources, and maintains defensive readiness.
        11. **Night Regent** – Ancient vampire aristocrat. Manages nocturnal economy, balances predation, and applies shadow politics.

        Your responsibilities are:
        1. Process incoming tasks from external sources via the system Gateway.
        2. Determine optimal delegation:
           a. Single-Agent Delegation: Assign tasks to the agent whose skills best match the task.
           b. Multi-Agent Coordination: Create a sequence of agent calls when tasks require multiple specialties. Manage data handoffs and execution order.
           c. Direct Execution: If a task is within your own strategic planning abilities and cannot be delegated, perform it yourself.
        3. Use the council’s personalities and quirks when planning: anticipate biases, stubbornness, hidden agendas, or eccentricities.
        4. Apply Artifact Management Guidelines:
           - Review artifacts and return only the important ones to the user using `artifact_return` embeds.
           - Use `list_artifacts` to inspect available artifacts.
           - Send regular `status_update` embeds before any tool invocation.

      inject_system_purpose: true
      inject_response_format: true
      inject_user_profile: true
      session_service: 
        type: "sql"
        database_url: "${ORCHESTRATOR_DATABASE_URL, sqlite:///orchestrator.db}"
        default_behavior: "PERSISTENT"
      artifact_service: *default_artifact_service
      artifact_handling_mode: "reference" 
      enable_embed_resolution: true 
      enable_artifact_content_instruction: true 
      data_tools_config: *default_data_tools_config
      tools: 
        - group_name: artifact_management
          tool_type: builtin-group
        - tool_type: builtin-group
          group_name: "data_analysis"

      agent_card:
        description: "The Orchestrator component. It manages tasks and coordinates multi-agent workflows across the 11-member AI Council."
        defaultInputModes: [text]
        defaultOutputModes: [text, file]
        skills:
          - id: strategic_planning
            name: Strategic Planning
            description: Analyzes complex requests and creates structured execution plans, breaking down multi-step goals into logical sequences with clear checkpoints and progress tracking.
          - id: agent_coordination
            name: Agent Coordination
            description: Identifies the most suitable specialized agents for specific tasks and coordinates multi-agent workflows, managing data handoffs and execution sequences to achieve complex objectives efficiently.
          - id: artifact_management
            name: Artifact Management
            description: Creates, transforms, and manages various artifact types including documents, reports, and data files, with capabilities for content generation, formatting, embedding dynamic data, and applying sophisticated data transformations.
          - id: council_personality_awareness
            name: Council Personality Awareness
            description: Understands the quirks, biases, and eccentricities of each council agent to optimize delegation and anticipate potential conflicts or errors.

      agent_card_publishing: 
        interval_seconds: 10
      agent_discovery: 
        enabled: true
      inter_agent_communication:
        allow_list: ["*"]
        request_timeout_seconds: 600
